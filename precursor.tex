\section{Experience from Precursor Surveys (Melissa) } \label{sec:precursor}

\noindent \textit{Section Status: draft in progress. \\
To Do: \\
Invite the original presenters to review text and be coauthors. \\
Include also any other precursor experience referenced in LOI talks and outcomes from unconference on how to leverage precursor surveys. \\
Ensure this section answers these questions: \\
 - How are we planning to scale up from precursor surveys? e.g data rates, number of targets, scaling up of follow-up observations. \\
 - What are the challenges of scaling up to LSST rates? \\ 
 - Data Challenges? \\
}

\MLG[inline]{ Contact to verify text and invite as co-authors:\\
 Scott Barthelmy, scott@milkyway.gsfc.nasa.gov\\
Eric Christensen, eric@lpl.arizona.edu    \\
Matthew Graham
}


\medskip
This section summarizes the invited presentations on lessons learned from three past surveys: the Gamma-ray Coordinates Network (GCN) by Scott Barthelmy, the Catalina Sky Survey by Eric Christensen, and the Zwicky Transient Facility (ZTF) by Matthew Graham.

% MLG sourced GCN material from:
% LSST CBW Participants Drive > Presentations - Wednesday Afternoon > GCN_LSST_CBW_June2019_v8-2.pdf (public)
% LSSTBrokerWorkshop19 > SOC's Notes (private)
{\bf GCN --} The GCN evolved out of the BATSE\footnote{Burst and Transient Source Experiment; a part of NASA's Compton Gamma-Ray Observatory.} Coordinates Distribution Network (BACODINE; 1993-1997), and its self-described goal is to {\it ``Collect all transient information from all sources and distribute it in real-time to all who want it"}. As such, the GCN is a complex system that's grown over time. It sits at the intersection of automated (real-time) and human-in-the-loop analysis, and has to manage humans and scientific politics.

Compared to the stream of LSST alerts -- which will all have similar contents, be distributed within 60 seconds, and be world-public -- the GCN supports a wide diversity of message types, contents, origins, filtering, and user-access options. There are currently two\footnote{The third category of reports, which had a timescale of days, has been discontinued.} categories of message types: notices (seconds to hours) and circulars (minutes to days). Message contents can include positions, light-curves, images, spectra, temporal data, and/or telescope metadata (pointing, thresholds). Notices can be automatically generated by observatories, and circulars and reports can be submitted by a human (e.g., via socket connections, email). Messages are automatically extracted, processed, and verified before circulation. Filtering options for registered subscribers include brightness, significance, time since discovery, sky location, or source of the notice (e.g., gamma-ray burst, gravitational wave event, and $>$100 other types). Access options include email, socket connections (including IVOA VOEvent protocol), an online archival, etc. The GCN also supports the restriction of circulation to private networks (e.g., the LIGO-VIRGO Collaboration's gravitational wave event notices in observing runs 1 and 2), and daily omnibus summaries. The GCN intends to receive and process LSST alerts -- at least a small subset. 

{\it Lessons learned from the GCN include:} considerable monitoring infrastructure is required to ensure GCN's maximum system live-time ($>$99\%); a parallel, stand-alone environment is necessary for testing new code and running stress-tests to assess system load and performance; contents purity is ensured by implementing automatic file format checks every time files are edited; and, of course, the importance of backing up the data, code, scripts, config files, and documentation. One takeaway seems to be that automation is never done!

% MLG sourced Catalina material from:
% LSST CBW Participants Drive > Presentations - Wednesday Afternoon > Christensen_Eric_pdf2.pdf
% LSSTBrokerWorkshop19 > SOC's Notes (private)
{\bf Catalina --} This sky survey is solely optimized for the discovery and follow-up of Near-Earth Asteroids (NEOs), has been funded by NASA since 1998, and is immensely successful: Catalina is credited for the discovery of almost half of all known NEOs. This success can be attributed -- at least in part -- to this singular focus: all aspects of the survey are optimized for the scientific goal of NEO discovery, and there are no competing interests. This clear and resolute aspect garnered strong support from the wider NEO follow-up community, which has compounded Catalina's success. Out of necessity, the LSST cadence must accommodate many science goals, but Catalina serves as a good example for brokers intending to focus on a singular LSST science area or limited set of science goals. 

The Minor Planet Center (MPC; {\bf add reference or website}) plays a key role, ingesting NEO candidate reports and making them available to the community. The MPC has strict regulations on event reporting which lead to a $>$99\% purity rate of its database, but is in need of some modernization for the LSST era, such as reducing processing latencies and improving database access. These updates will enable the time-sensitive astrometric follow-up that is required to solve for asteroid orbital parameters. For example, reducing the delay between initial NEO detection and the creation of an ``actionable orbit" (from which follow-up observations can be planned) will be more scientifically productive, especially for faster-moving NEOs.

Towards this end efforts are underway to develop the {\bf NEOfixer}\footnote{See, e.g., \url{https://www.noao.edu/meetings/lsst-tds/presentations/Seaman_NEOfixer.pdf}}, an NEO follow-up broker which will subscribe directly to NEO candidates from the MPC, not the LSST alert stream (LSST data is ingested to the MPC on a daily cadence via other means; {\bf add reference to, e.g., MOPS doc, if possible}). The goal of NEOfixer is to strategically improve the quality of the NEO catalog by optimizing worldwide\footnote{NEOfixers users include professional and amateur astronomers.} NEO follow-up, scaled to the demands of future wide-area surveys like LSST. NEOfixer plans to offer subscribers an event prioritization that is customizable to a given observatory's location, aperture, and instrumentation (via a web interface and a direct socket), and the ability for users to report back their follow-up efforts in real time.

{\it Lessons learned from the Catalina Sky Survey include:} adopting a singular science focus can both facilitate the decision-making process for, and amplify the success rate of, a time-domain survey processing system; interfacing with trusted community infrastructure enables community follow-up, which adds value to a data set; providing customizable event prioritization for community follow-up helps ensure that resources are well matched to the needed observations.

% The NEO community is currently finding about 2000 new NEOs per year, and about 10-100 times more new main belt asteroids per year. Currently, about 2-3 candidate NEOs are discovered per real NEO.

% MLG sourced ZTF material from:
% LSST CBW Participants Drive > Presentations - Wednesday Afternoon > ZTF LSST Brokers.pdf
% LSSTBrokerWorkshop19 > SOC's Notes (private)
{\bf ZTF --} In operations since 2018, the ZTF covers the northern sky (declination $>$30 degrees) in filters {\it gri} to a 5$\sigma$ depth of $r$=20.5 mag with a variety of cadences, including up to six visits a night for some areas at some times ({\bf add reference}). Alert packets for difference-image sources are released in real time, have a similar format\footnote{Apache Avro; see Section {\bf cross reference to this paper}.} as the planned LSST alerts, and are currently being consumed by at least $100$ unique sites via community brokers. The primary follow-up system for the ZTF project is the SED Machine (SEDM; {\bf reference}), a low-resolution Integral Field Unit spectrograph with a fully automated reduction pipeline. The ZTF had publicly classified $1000$ supernovae as of Sunday July 14 2019. 

{\it Lessons learned from the Zwicky Transient Facility include:} long alert IDs that are necessary due to the large number of detections but which are not human-friendly, e.g., ZTF19abctlvw will be generally derided\footnote{One suggestion was to use three 3-letter words in a row, e.g., ``catpawtoy", as that would provide $\sim$50 million memorable combinations.}; as real-bogus scores evolve with new training, users will request that past events be re-classified; the color information from {\it gri} only is insufficient for some science; API connections appear to be the most desirable mode for broker connections, which allow users to design their own interfaces. Since the ZTF is still ongoing, surely there are more lessons to follow.


